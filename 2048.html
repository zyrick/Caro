<!DOCTYPE html>
<html>
<head>
<style>
.mainframe{
border: 3px solid green;
background: white;
width:840px;
height:840px;
}

.box{
width:200px;
height:200px;
margin:auto;
line-height:200px;
border:2px solid red;
background: white;
color:black;
display:inline-block;
text-align:center;
font-size:50px;
}
</style>
<script>
var box_list=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
var var_list =[2, 2, 2, 4, 4, 8];
var control_obj={spawn_num:0, highest_val:0, empty_box:16};

function display(box, value){
var box_set = document.getElementById(box);
switch (value){
	case 0:
	box_set.innerHTML = '-';
	box_set.style.backgroundColor = "white";
	break;
	default:
	box_set.innerHTML = value;
	box_set.style.backgroundColor = "rgb(0,240,240)";
	break;
	}
}

function spawn_box(){
var cnt = 0;
var box_cnt;	
var box_val = 0;
var ran_var;
	while(cnt<2){
		box_val = Math.floor(Math.random()*16);
		ran_var = Math.floor(Math.random()*6);
		box_cnt = box_list[box_val];
		if (box_cnt == 0){
		display("box"+box_val,var_list[ran_var]);
		box_list[box_val] = var_list[ran_var];
		cnt++;
		}
	}
}

function move_box(){
var fnd = 0;
var sum;
	for(fnd = 0; fnd <16;fnd++){
		if( box_list[fnd] > 0){
		sum = fnd +4;
			if( (box_list[sum] == 0)||(box_list[fnd] == box_list[sum])){
				box_list[sum] += box_list[fnd]; 
				box_list[fnd] = 0;
				display("box"+fnd,box_list[fnd]);
				display("box"+sum,box_list[sum]);
			}
		}
	}
	spawn_box();
} 
</script>
</head>
<body>
<p id="text">Random</p>
<div class="mainframe">
	<div class="box" id="box0">-</div>
	<div class="box" id="box1">-</div>
	<div class="box" id="box2">-</div>
	<div class="box" id="box3">-</div>
	<div class="box" id="box4">-</div>
	<div class="box" id="box5">-</div>
	<div class="box" id="box6">-</div>
	<div class="box" id="box7">-</div>
	<div class="box" id="box8">-</div>
	<div class="box" id="box9">-</div>
	<div class="box" id="box10">-</div>
	<div class="box" id="box11">-</div>
	<div class="box" id="box12">-</div>
	<div class="box" id="box13">-</div>
	<div class="box" id="box14">-</div>
	<div class="box" id="box15">-</div>

</div>

<button type="button" onclick="spawn_box()">Click here </button>
<button type="button" onclick="move_box()">Move box </button>
</body>
</html>